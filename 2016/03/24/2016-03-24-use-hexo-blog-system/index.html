<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="gSzky7oTp7RzdEgcDjhYXt9a5SXccmQu93Uv3Jq_Pzk" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo,Github,Travis CI," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="使用博客来记录平时工作、生活中的各种心得和体会，是很好的习惯和积累方法。经常能在各种招聘帖中看到请提供 GitHub 帐号和个人博客地址，最近利用闲暇时间使用 Hexo 在 GitHub 上搭建了一个博客。在此，将过程记录下来。
阅读之前本文使用Mac系统进行示例，在完整阅读这篇博客之前，先介绍下文章的整体结构。

预备知识介绍搭建博客之前，需要具备的一些知识点；
搭建基本博客介绍搭建一个基本的H">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 Hexo 在 GitHub 上搭建博客">
<meta property="og:url" content="https://stayhf.github.io/2016/03/24/2016-03-24-use-hexo-blog-system/index.html">
<meta property="og:site_name" content="Blue">
<meta property="og:description" content="使用博客来记录平时工作、生活中的各种心得和体会，是很好的习惯和积累方法。经常能在各种招聘帖中看到请提供 GitHub 帐号和个人博客地址，最近利用闲暇时间使用 Hexo 在 GitHub 上搭建了一个博客。在此，将过程记录下来。
阅读之前本文使用Mac系统进行示例，在完整阅读这篇博客之前，先介绍下文章的整体结构。

预备知识介绍搭建博客之前，需要具备的一些知识点；
搭建基本博客介绍搭建一个基本的H">
<meta property="og:image" content="http://7xskzj.com1.z0.glb.clouddn.com/blog_overview.png">
<meta property="og:image" content="http://7xskzj.com1.z0.glb.clouddn.com/create_blog_repo.png">
<meta property="og:image" content="http://7xskzj.com1.z0.glb.clouddn.com/blog_overview.png">
<meta property="og:image" content="http://7xskzj.com1.z0.glb.clouddn.com/start_travis_ci.png">
<meta property="og:updated_time" content="2016-04-10T15:37:33.302Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用 Hexo 在 GitHub 上搭建博客">
<meta name="twitter:description" content="使用博客来记录平时工作、生活中的各种心得和体会，是很好的习惯和积累方法。经常能在各种招聘帖中看到请提供 GitHub 帐号和个人博客地址，最近利用闲暇时间使用 Hexo 在 GitHub 上搭建了一个博客。在此，将过程记录下来。
阅读之前本文使用Mac系统进行示例，在完整阅读这篇博客之前，先介绍下文章的整体结构。

预备知识介绍搭建博客之前，需要具备的一些知识点；
搭建基本博客介绍搭建一个基本的H">
<meta name="twitter:image" content="http://7xskzj.com1.z0.glb.clouddn.com/blog_overview.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 使用 Hexo 在 GitHub 上搭建博客 | Blue </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?26adae9fe667e62ddd47b5768bd4df59";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Blue</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">一行白鹭上青天</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '9okJCjsVTw1Pnj9-JtdQ','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                使用 Hexo 在 GitHub 上搭建博客
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-24T13:56:13+00:00" content="2016-03-24">
              2016-03-24
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/24/2016-03-24-use-hexo-blog-system/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/24/2016-03-24-use-hexo-blog-system/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/03/24/2016-03-24-use-hexo-blog-system/" class="leancloud_visitors" data-flag-title="使用 Hexo 在 GitHub 上搭建博客">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>使用博客来记录平时工作、生活中的各种心得和体会，是很好的习惯和积累方法。经常能在各种招聘帖中看到<code>请提供 GitHub 帐号和个人博客地址</code>，最近利用闲暇时间使用 Hexo 在 GitHub 上搭建了一个博客。在此，将过程记录下来。</p>
<h2 id="阅读之前"><a href="#阅读之前" class="headerlink" title="阅读之前"></a>阅读之前</h2><p>本文使用Mac系统进行示例，在完整阅读这篇博客之前，先介绍下文章的整体结构。</p>
<ul>
<li><strong>预备知识</strong>介绍搭建博客之前，需要具备的一些知识点；</li>
<li><strong>搭建基本博客</strong>介绍搭建一个基本的Hexo博客、以及如何编写文章和发布；</li>
<li><strong>进阶设置</strong>介绍一些更高级的配置；</li>
<li><strong>自动化部署</strong>介绍如何在多台机器都能编写博客、以及如何让文章自动化生成和部署。</li>
</ul>
<p><img src="http://7xskzj.com1.z0.glb.clouddn.com/blog_overview.png" alt=""></p>
<a id="more"></a>
<h2 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h2><p>在开始介绍搭建过程之前，我们需要掌握一些基本的知识和技能。</p>
<h3 id="Git相关"><a href="#Git相关" class="headerlink" title="Git相关"></a>Git相关</h3><p>整个博客的搭建、后续的发布和部署都需要使用Git的相关命令，包括：</p>
<ul>
<li>克隆仓库</li>
<li>创建分支</li>
<li>更新和提交</li>
<li>GitHub 的 Personal Access Token</li>
</ul>
<p>GitHub 提供了一个客户端 <a href="https://desktop.github.com" target="_blank" rel="external">GitHub Desktop</a>，提供了这些基本功能。如果对这块不了解，可以先去玩玩它。</p>
<h3 id="Homebrew"><a href="#Homebrew" class="headerlink" title="Homebrew"></a>Homebrew</h3><p>Homebrew 是做什么的？<a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">官网</a> 给出了明确解释：<strong>OS X 不可或缺的套件管理器！</strong> 同时，也给出了安装方法。</p>
<h3 id="Node-js-和-NPM"><a href="#Node-js-和-NPM" class="headerlink" title="Node.js 和 NPM"></a>Node.js 和 NPM</h3><ul>
<li>Node.js 内嵌 <strong>V8</strong> 引擎，是目前非常流行的JavaScript运行环境；</li>
<li>NPM 是 Node.js 包管理器。</li>
</ul>
<p>我们使用 <a href="https://github.com/creationix/nvm" target="_blank" rel="external">NVM</a>(Node.js Version Manager) 来安装 Node.js 环境.</p>
<h4 id="首先安装-NVM"><a href="#首先安装-NVM" class="headerlink" title="首先安装 NVM"></a>首先安装 NVM</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: brew install nvm</span><br></pre></td></tr></table></figure>
<h4 id="使用-NVM-安装-Node-js"><a href="#使用-NVM-安装-Node-js" class="headerlink" title="使用 NVM 安装 Node.js"></a>使用 NVM 安装 Node.js</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$: nvm ls</span><br><span class="line">node -&gt; stable (-&gt; v5.9.0) (default)</span><br><span class="line">stable -&gt; 5.9 (-&gt; v5.9.0) (default)</span><br><span class="line">iojs -&gt; N/A (default)</span><br><span class="line">$: nvm install 5.9.0</span><br></pre></td></tr></table></figure>
<p>这样 Node.js 和 NPM 就都安装好了。</p>
<h3 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h3><p>Hexo的安装很简单:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: npm install hexo-cli -g</span><br></pre></td></tr></table></figure></p>
<p>关于Hexo的更多指令，去<a href="https://hexo.io" target="_blank" rel="external">官网</a>看看吧！</p>
<h2 id="搭建基本博客"><a href="#搭建基本博客" class="headerlink" title="搭建基本博客"></a>搭建基本博客</h2><p>掌握<a href="#预备知识">预备知识</a>后，我们就可以开始搭建博客了。</p>
<h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p>GitHub在<a href="https://pages.github.com/" target="_blank" rel="external">这里</a>给出了如何去创建一个博客仓库的过程:<br><img src="http://7xskzj.com1.z0.glb.clouddn.com/create_blog_repo.png" alt=""><br>就是说如果你在 GitHub 上的用户名是 <code>andy</code>, 那么你需要创建一个叫<code>andy.github.io</code> 的仓库。</p>
<p>创建成功之后，在仓库里放一个叫index.html的文件，假设是下面的内容：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>几分钟之后，GitHub服务器会自动为你开通博客域名 <strong><a href="https://andy.github.io" target="_blank" rel="external">https://andy.github.io</a></strong></p>
<p>访问一下，看看效果吧！</p>
<h3 id="创建博客目录"><a href="#创建博客目录" class="headerlink" title="创建博客目录"></a>创建博客目录</h3><p>准备工作已经完成，下面就可以在本地创建一个博客目录，以后我们写博客就都在这个目录下进行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$: hexo init blog</span><br><span class="line">blog $: cd blog</span><br><span class="line">blog $: npm install</span><br></pre></td></tr></table></figure>
<p>这里简单介绍下blog的目录结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">blog</span><br><span class="line">   |---scaffolds             ------&gt; 模版目录</span><br><span class="line">   |           |---draft.md      ------&gt; 博客草稿模版</span><br><span class="line">   |           |---page.md       ------&gt; 页面模版</span><br><span class="line">   |           |---post.md       ------&gt; 博客模版</span><br><span class="line">   |---source                ------&gt; 数据目录</span><br><span class="line">   |        |---_drafts          ------&gt; 草稿目录</span><br><span class="line">   |        |---_posts           ------&gt; 博客目录</span><br><span class="line">   |---themes                ------&gt; 主题目录</span><br><span class="line">   |        |---landscape        ------&gt; 自带默认主题</span><br><span class="line">   |---_config.yml           ------&gt; 博客站点配置文件</span><br><span class="line">   |---package.json          ------&gt; AMD包配置文件</span><br></pre></td></tr></table></figure></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>在开始编写博文之前，需要修改 <strong>_config.yml</strong> 来对博文站点进行配置。<br>这些配置包括：</p>
<ul>
<li>网站</li>
<li>网址</li>
<li>目录</li>
<li>文章</li>
<li>分类和标签</li>
<li>日期／时间格式</li>
<li>分页</li>
<li>扩展</li>
</ul>
<p>大部分的内容请参考 <a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="external">Hexo官网的配置文档</a>。</p>
<p>下面主要说一下<strong>扩展</strong>里关于<strong>部署</strong>部分的配置：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> git</span><br><span class="line"><span class="attr">  repo:</span> https://&#123;token&#125;@github.com/andy/andy.github.io.git</span><br><span class="line"><span class="attr">  branch:</span> master</span><br><span class="line"><span class="attr">  message:</span> <span class="string">"update post"</span></span><br></pre></td></tr></table></figure></p>
<p>注意上面的 <strong>{token}</strong>, 它是你 GitHub 上的 Personal Access Token。这样有一个好处，就是你在部署时就不需要输入GitHub 用户名和密码。</p>
<h3 id="草稿"><a href="#草稿" class="headerlink" title="草稿"></a>草稿</h3><p>创建博文指令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog $: hexo new [layout] title</span><br></pre></td></tr></table></figure></p>
<p><code>layout</code>分为 post、page 和 draft, 不指定的话默认是 <strong>post</strong>。</p>
<p>例如：<code>hexo new draft &quot;begin-blog&quot;</code> 将在 <strong>blog/source/_drafts/</strong> 目录下创建一篇博文草稿 <strong>begin-blog.md</strong></p>
<p>之后，用你喜欢的编辑器打开 <strong>begin-blog.md</strong> 来写作。</p>
<h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><p>草稿要使用发布命令来将其移动到 <strong>blog/source/_posts</strong> 目录下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog $: hexo publish begin-blog</span><br></pre></td></tr></table></figure></p>
<p>简单起见，我会直接创建 <strong>layout 为 post</strong> 的博文，省去<strong>发布</strong>过程。</p>
<h3 id="生成"><a href="#生成" class="headerlink" title="生成"></a>生成</h3><p>将发布的博文从 <strong>.md</strong> 生成为 <strong>.html</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog $: hexo generate</span><br></pre></td></tr></table></figure></p>
<h3 id="预览"><a href="#预览" class="headerlink" title="预览"></a>预览</h3><p>可以在本地启动一个http server来预览生成的博文。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog $: hexo server</span><br></pre></td></tr></table></figure></p>
<p>服务器默认侦听4000端口，浏览器打开 <a href="http://localhost:4000" target="_blank" rel="external">http://localhost:4000</a></p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><p>博文没有问题，就可以部署到 GitHub 上了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog $: hexo deploy</span><br></pre></td></tr></table></figure></p>
<p>试试访问 <a href="https://andy.github.io" target="_blank" rel="external">https://andy.github.io</a> 看看吧！</p>
<p>现在，你有了一个自己的博客，使用默认的主题。可以很方便的写博客和发布博客。<br>或许，你觉得这个主题你并不喜欢，或者一些很细节的问题没有解决。比如：评论、分享、搜索等，那么可以再看看下面的进阶配置。</p>
<h2 id="进阶配置"><a href="#进阶配置" class="headerlink" title="进阶配置"></a>进阶配置</h2><h3 id="配置主题"><a href="#配置主题" class="headerlink" title="配置主题"></a>配置主题</h3><p>选一个合适的主题非常重要。合适的主题让你的心情更加舒畅，没准让你能孕育出一篇旷世奇文。</p>
<p><a href="https://hexo.io/themes/" target="_blank" rel="external">Hexo 官网</a>有很多非常优秀的主题，这里我以 <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="external">NexT</a> 主题作为例子，因为它看起来简洁而又功能齐全。</p>
<p>安装 NexT 主题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog $: git clone https://github.com/iissnan/hexo-theme-next.git themes/next</span><br></pre></td></tr></table></figure></p>
<p>启用 NexT 主题</p>
<p>在站点配置文件 <strong>_config.yml</strong> 中，修改使用的主题：<br>将<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: landscape</span><br></pre></td></tr></table></figure></p>
<p>修改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure></p>
<h3 id="配置阅读次数"><a href="#配置阅读次数" class="headerlink" title="配置阅读次数"></a>配置阅读次数</h3><p>NexT 主题使用 <a href="https://leancloud.cn/" target="_blank" rel="external">leancloud</a> 统计每篇博文的访客。首先去注册并拿到：</p>
<ul>
<li>app_id</li>
<li>app_key</li>
</ul>
<p>配置 NexT 主题的 _config.yml (位于blog/themes/next)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">leancloud_visitors:</span><br><span class="line">  enable: true</span><br><span class="line">  app_id: &#123;your_app_id&#125;</span><br><span class="line">  app_key: &#123;your_app_key&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="配置评论系统"><a href="#配置评论系统" class="headerlink" title="配置评论系统"></a>配置评论系统</h3><p>NexT 支持的评论系统有 <strong>Disqus</strong> 和 <strong>duoshuo</strong>, 鉴于国内的网络环境，使用duoshuo还是更好一些。</p>
<p>去duoshuo注册拿到 shortname， 并配置主题配置文件:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">duoshuo_shortname: your_duoshuo_shortname</span><br></pre></td></tr></table></figure></p>
<h3 id="配置站点地图"><a href="#配置站点地图" class="headerlink" title="配置站点地图"></a>配置站点地图</h3><p>这里只示例向Google提供站点地图, 让其它人能通过Google搜索到你的博文。</p>
<p>默认的博客目录并没有带生成站点地图的组件，需要我们手动添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blog $: npm install --save hexo-generator-sitemap</span><br><span class="line">blog $: npm install --save hexo-generator-robotstxt</span><br></pre></td></tr></table></figure></p>
<p>配置站点配置文件<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line"><span class="attr">  path:</span> sitemap.xml</span><br><span class="line"></span><br><span class="line"><span class="attr">Plugins:</span></span><br><span class="line"><span class="bullet">-</span> hexo-generator-robotstxt</span><br><span class="line"><span class="bullet">-</span> hexo-generator-sitemap</span><br><span class="line"></span><br><span class="line"><span class="attr">robotstxt:</span></span><br><span class="line"><span class="attr">  useragent:</span> <span class="string">"*"</span></span><br><span class="line"><span class="attr">  sitemap:</span> /sitemap.xml</span><br></pre></td></tr></table></figure></p>
<p>最后，去google网站添加验证，参考：</p>
<ul>
<li><a href="http://www.yuanye097.com/2015/10/27/hello-world/" target="_blank" rel="external">hexo向google提交sitemap</a></li>
<li><a href="http://theme-next.iissnan.com/third-party-services.html#google-webmaster-tools" target="_blank" rel="external">Google Webmaster tools</a></li>
</ul>
<h3 id="配置站内搜索"><a href="#配置站内搜索" class="headerlink" title="配置站内搜索"></a>配置站内搜索</h3><p>可以预见到当博文比较多时，使用站内搜索来搜索博文非常必要。这里使用 Swiftype 进行站内搜索。</p>
<p><a href="http://theme-next.iissnan.com/third-party-services.html#swiftype" target="_blank" rel="external">去Swiftype注册并创建一个搜索引擎</a>，得到swiftype_key, 配置<code>主题配置文件</code>:<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">swiftype_key:</span> your_swiftype_key</span><br></pre></td></tr></table></figure></p>
<h3 id="使用图床"><a href="#使用图床" class="headerlink" title="使用图床"></a>使用图床</h3><p>介绍使用七牛的图床，首先去七牛注册并创建一个空间, 拿到：</p>
<ul>
<li>空间名称</li>
<li>access_key</li>
<li>secret_key</li>
</ul>
<p>下载本地命令行同步工具 <a href="http://developer.qiniu.com/code/v6/tool/qrsync.html" target="_blank" rel="external">qasync</a>, 假设放在/usr/local/bin/qiniu-devtools:</p>
<ol>
<li><p>在/usr/local/bin/qiniu-devtools目录下新建 <strong>conf.json</strong> 文件， 内容如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"src"</span>: <span class="string">"/Users/andy/Pictures/qiniu-images"</span>,</span><br><span class="line">    <span class="attr">"dest"</span>: <span class="string">"qiniu:access_key=&#123;access_key&#125;&amp;secret_key=&#123;secret_key&#125;&amp;bucket=&#123;空间名称&#125;"</span>,</span><br><span class="line">    <span class="attr">"debug_level"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改~/.bash_profile文件，增加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias qiniu=&quot;/usr/local/bin/qiniu-devtools/qrsync /usr/local/bin/qiniu-devtools/conf.json&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>让~/.bash_profile文件生效：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: source ~/.bash_profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>将你要上传到七牛的图片放到<code>/Users/andy/Pictures/qiniu-images</code>， 然后在命令行执行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: qiniu</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>上传成功之后，就可以七牛网站上拿到图片的外链地址了。</p>
<p>现在，你的博客使用着自己喜欢的主题，阅读次数、Google搜索、站内搜索、评论等一应俱全，是不是很开心，但还有些技巧也很有意思，能够简化你博客的部署过程，不妨往下看看？</p>
<h2 id="自动化部署"><a href="#自动化部署" class="headerlink" title="自动化部署"></a>自动化部署</h2><p>看到文章最开始的配图了吗？这里将图片再贴一次，并描述一个强需求的使用场景：<br><img src="http://7xskzj.com1.z0.glb.clouddn.com/blog_overview.png" alt=""></p>
<ol>
<li>假设你在公司和家里都想能对你的博客进行操作，那么将本地博客目录提交到 GitHub 来进行管理就是个好主意；</li>
<li>静态博文和原始博文在 GitHub 的同一个仓库的<strong>不同分支</strong>上；</li>
<li>当 Travis CI 检测到你的原始博文有变动时，将自动生成静态博文，并将其自动提交到你的博客仓库中。</li>
</ol>
<p>将这张图的内容分解为下面几步来实现。</p>
<h3 id="将本地博客目录提交到Github"><a href="#将本地博客目录提交到Github" class="headerlink" title="将本地博客目录提交到Github"></a>将本地博客目录提交到Github</h3><p>GitHub上的博客仓库默认分支是 <strong>master</strong>，用来存放你生成的静态博文。 通过域名访问博客时，WebServer也是取的这个分支下的内容。<br>在这个仓库上创建一个分支 <strong>source</strong>，用来存放你的原始博文。</p>
<p>我们之前是将本地静态博文直接部署到 GitHub 博客仓库的<strong>master</strong>分支。</p>
<ol>
<li><p>博客仓库克隆到本地：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: git clone https://www.github.com/andy/andy.github.io.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建 <strong>source</strong> 分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd andy.github.io</span><br><span class="line">andy.github.io $: git checkout -b source</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除 <strong>source</strong> 分支下除了<strong>.git</strong>目录外的所有文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">andy.github.io $: ls | xargs rm -rf</span><br></pre></td></tr></table></figure>
</li>
<li><p>将本地博客目录中的文件复制过来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">andy.github.io $: cp /path/to/blog/* ./</span><br></pre></td></tr></table></figure>
</li>
<li><p>在目录下新建 <code>.gitignore</code> 文件，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.deploy*/</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">db.json</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交 <strong>source</strong> 分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">andy.github.io $: git commit -am &quot;first commit&quot;</span><br><span class="line">andy.github.io $: git push origin source</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="加密-Personal-Access-Token"><a href="#加密-Personal-Access-Token" class="headerlink" title="加密 Personal Access Token"></a>加密 Personal Access Token</h3><p>要授权 Travis CI 对我们博客仓库的 <strong>master分支</strong> 进行更新，我们需要告诉它 token，但这个token的权限很高。一旦泄漏，别人就可以完全操作的博客仓库。</p>
<p>因此，Travis CI 提供了一种加密机制。将token加密后的内容放在你的构建脚本中是安全的，因为只有 Travis CI 才可以解密使用。</p>
<ol>
<li><p>申请 GitHub Personal Access Token</p>
<p>申请请参考链接 <a href="https://help.github.com/articles/creating-an-access-token-for-command-line-use/" target="_blank" rel="external">申请GitHub Token</a></p>
<p><strong>Token申请到后只显示一次，请保存在安全的地方!</strong></p>
</li>
</ol>
<ol>
<li><p>安装 Travis CI 命令行工具：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: gem install travis</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 GitHub账号登录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: travis login</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建 Travis CI 配置文件 <code>.travis.yml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">andy.github.io $: touch .travis.yml</span><br></pre></td></tr></table></figure>
</li>
<li><p>加密 token</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">andy.github.io $: travis encrypt &apos;GH_TOKEN=&#123;TOKEN&#125;&apos; --add</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>将其中<code>{TOKEN}</code> 部分换成你申请到的token即可。<br>执行完后，会在 <code>.travis.yml</code> 中增加类似以下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">env:</span><br><span class="line">  global:</span><br><span class="line">  - secure: 12345ABJKLFJDALSJFALUERI3U2N3N2LJNVZJFDKLAJF</span><br></pre></td></tr></table></figure></p>
<h3 id="开启博客仓库的-Travis-CI"><a href="#开启博客仓库的-Travis-CI" class="headerlink" title="开启博客仓库的 Travis CI"></a>开启博客仓库的 Travis CI</h3><p>接下来，我们去 <a href="https://www.travis.org" target="_blank" rel="external">Travis CI网站</a>, 开启博客仓库的持续集成。<br><img src="http://7xskzj.com1.z0.glb.clouddn.com/start_travis_ci.png" alt=""><br>如果看不到你的仓库，点击一下右上角的同步。</p>
<p>点击仓库的小齿轮，配置一下细节：<br>开启 <code>Build only if .travis.yml is present</code></p>
<h3 id="配置-Travis-CI"><a href="#配置-Travis-CI" class="headerlink" title="配置 Travis CI"></a>配置 Travis CI</h3><p>最后，我们完善一下 Travis CI 配置文件 <code>.travis.yml</code><br>这里给出一个实例：<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> node_js</span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">'5'</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">  -</span> source</span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line"><span class="bullet">-</span> npm install -g hexo-cli</span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">-</span> npm install</span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">-</span> hexo g</span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line"><span class="bullet">-</span> git config --global user.name <span class="string">"andy"</span></span><br><span class="line"><span class="bullet">-</span> git config --global user.email <span class="string">"andy@xxx.com"</span></span><br><span class="line"><span class="bullet">-</span> sed -i<span class="string">''</span> <span class="string">"/^ *repo/s~github\.com~$&#123;GH_TOKEN&#125;@github.com~"</span> _config.yml</span><br><span class="line"><span class="bullet">-</span> hexo d --silent</span><br><span class="line"></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line"><span class="attr">  directories:</span></span><br><span class="line"><span class="bullet">    -</span> node_modules</span><br><span class="line"><span class="attr">env:</span></span><br><span class="line"><span class="attr">  global:</span></span><br><span class="line"><span class="attr">  - secure:</span> JFDLASJFALJF4U538412JFKLDAJSVNFADLGJFALFJALJF</span><br></pre></td></tr></table></figure></p>
<p>内容很容易理解，就不解释了。</p>
<p>现在，试试修改一篇博文，并提交一次看看吧！</p>

      
    </div>

    <div>
      
        
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Hexo/" rel="tag">#Hexo</a>
          
            <a href="/tags/Github/" rel="tag">#Github</a>
          
            <a href="/tags/Travis-CI/" rel="tag">#Travis CI</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/03/23/begin-blog/" rel="next" title="开始写博客">
                <i class="fa fa-chevron-left"></i> 开始写博客
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/03/28/add-storyboard-reference/" rel="prev" title="添加Storyboard Reference">
                添加Storyboard Reference <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/03/24/2016-03-24-use-hexo-blog-system/"
           data-title="使用 Hexo 在 GitHub 上搭建博客" data-url="https://stayhf.github.io/2016/03/24/2016-03-24-use-hexo-blog-system/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="stayhf" />
          <p class="site-author-name" itemprop="name">stayhf</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">4</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/stayHF" target="_blank">
                  
                    <i class="fa fa-globe"></i>
                  
                  github
                </a>
              </span>
            
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#阅读之前"><span class="nav-number">1.</span> <span class="nav-text">阅读之前</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#预备知识"><span class="nav-number">2.</span> <span class="nav-text">预备知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Git相关"><span class="nav-number">2.1.</span> <span class="nav-text">Git相关</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Homebrew"><span class="nav-number">2.2.</span> <span class="nav-text">Homebrew</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Node-js-和-NPM"><span class="nav-number">2.3.</span> <span class="nav-text">Node.js 和 NPM</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#首先安装-NVM"><span class="nav-number">2.3.1.</span> <span class="nav-text">首先安装 NVM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-NVM-安装-Node-js"><span class="nav-number">2.3.2.</span> <span class="nav-text">使用 NVM 安装 Node.js</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hexo"><span class="nav-number">2.4.</span> <span class="nav-text">Hexo</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#搭建基本博客"><span class="nav-number">3.</span> <span class="nav-text">搭建基本博客</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建仓库"><span class="nav-number">3.1.</span> <span class="nav-text">创建仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建博客目录"><span class="nav-number">3.2.</span> <span class="nav-text">创建博客目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置"><span class="nav-number">3.3.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#草稿"><span class="nav-number">3.4.</span> <span class="nav-text">草稿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#发布"><span class="nav-number">3.5.</span> <span class="nav-text">发布</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成"><span class="nav-number">3.6.</span> <span class="nav-text">生成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#预览"><span class="nav-number">3.7.</span> <span class="nav-text">预览</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#部署"><span class="nav-number">3.8.</span> <span class="nav-text">部署</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进阶配置"><span class="nav-number">4.</span> <span class="nav-text">进阶配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置主题"><span class="nav-number">4.1.</span> <span class="nav-text">配置主题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置阅读次数"><span class="nav-number">4.2.</span> <span class="nav-text">配置阅读次数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置评论系统"><span class="nav-number">4.3.</span> <span class="nav-text">配置评论系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置站点地图"><span class="nav-number">4.4.</span> <span class="nav-text">配置站点地图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置站内搜索"><span class="nav-number">4.5.</span> <span class="nav-text">配置站内搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用图床"><span class="nav-number">4.6.</span> <span class="nav-text">使用图床</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自动化部署"><span class="nav-number">5.</span> <span class="nav-text">自动化部署</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#将本地博客目录提交到Github"><span class="nav-number">5.1.</span> <span class="nav-text">将本地博客目录提交到Github</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#加密-Personal-Access-Token"><span class="nav-number">5.2.</span> <span class="nav-text">加密 Personal Access Token</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#开启博客仓库的-Travis-CI"><span class="nav-number">5.3.</span> <span class="nav-text">开启博客仓库的 Travis CI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置-Travis-CI"><span class="nav-number">5.4.</span> <span class="nav-text">配置 Travis CI</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">stayhf</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=0.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=0.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"stayhf"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("6Xv2dBSpeJA82etOjRvaaQEU-gzGzoHsz", "hc4MpxM5zVXeuYly6VTK2ViK");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

</body>
</html>
